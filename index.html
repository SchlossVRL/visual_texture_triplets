<!DOCTYPE html>
<html>

<head>
    <title>Triplet Embeddings: Textures</title>
    <script src="https://unpkg.com/jspsych@7.3.4"></script>
    <link href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css" rel="stylesheet" type="text/css" />

    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-button-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-button-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-keyboard-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-select@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-call-function@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>
</head>

<body></body>
<script>

    // ---------- UPDATE THESE ------------------

    //General experiment info to update
    var expServer = 0; //0 = not server version (writes a local csv file); 1 = server version (checks ID register, condition, data saving onto local or WID server)
    console.log(expServer)
    var expType = 1; // 0 = SONA version; 1 = mTurk version (relevant for consent form & debriefing)

    var expTime = 20; // How long experiment will take in minutes
    var experimenterName = "alchinni@wisc.edu"  //Update to your contact info. this is presented if an error arises for a participant
    var numConditions = 1; //Number of conditions. If more than 1 and on server, will counterbalance. 
    var numTasks = 1;  //Number of experimental tasks (not counting consent/demographics)


    var jsPsych = initJsPsych({
        show_progress_bar: false,
        on_data_update: function () {
            jsPsych.data.addProperties({ worker_id: urlvar.workerId });
            //timeline.push(save_data);
        },
        on_finish: function () {
            jsPsych.data.addProperties({ worker_id: urlvar.workerId });
            jsPsych.data.get().localSave("csv", filename);
            //timeline.push(save_data);
        },
        max_load_time: 120000,
    });

    // Create timeline variable //
    var timeline = []; //timeline for experiment (once ID is registered)

    /* create timeline */
    //var timeline = [];
    const subject_id = jsPsych.randomization.randomID(10);
    const filename = `${subject_id}.csv`;

    //Participant ID for experimenter to fill
    var participant_id = {
        type: jsPsychSurveyText,
        questions: [
            { prompt: "ID Number", name: 'ID', rows: "1", columns: "3", required: true, }]
    };

    timeline.push(participant_id);


    var urlvar = jsPsych.data.urlVariables();

    // const save_data = {
    //   type: jsPsychPipe,
    //   action: "save",
    //   experiment_id: "23TJCN2jsCll",
    //   filename: filename,
    //   data_string: () => jsPsych.data.get().csv(),
    // };

    var preload = {
        type: jsPsychPreload,
        //auto_preload: true,
        images: [
            //instruction images
            'materials/imgs/instruction_images/InstructionImg1D78.png', 'materials/imgs/instruction_images/InstructionImg2D34.png', 'materials/imgs/instruction_images/InstructionImg3D80.png',
            //trial images
            "materials/imgs/D1.png",
            "materials/imgs/D2.png",
            "materials/imgs/D3.png",
            "materials/imgs/D4.png",
            "materials/imgs/D5.png",
            "materials/imgs/D6.png",
            "materials/imgs/D7.png",
            "materials/imgs/D8.png",
            "materials/imgs/D9.png",
            "materials/imgs/D10.png",
            "materials/imgs/D11.png",
            "materials/imgs/D12.png",
            "materials/imgs/D13.png",
            "materials/imgs/D14.png",
            "materials/imgs/D15.png",
            "materials/imgs/D16.png",
            "materials/imgs/D17.png",
            "materials/imgs/D18.png",
            "materials/imgs/D19.png",
            "materials/imgs/D20.png",
            "materials/imgs/D21.png",
            "materials/imgs/D22.png",
            "materials/imgs/D23.png",
            "materials/imgs/D24.png",
            "materials/imgs/D25.png",
            "materials/imgs/D26.png",
            "materials/imgs/D27.png",
            "materials/imgs/D28.png",
            "materials/imgs/D29.png",
            "materials/imgs/D30.png",
            "materials/imgs/D31.png",
            "materials/imgs/D32.png",
            "materials/imgs/D33.png",
            "materials/imgs/D34.png",
            "materials/imgs/D35.png",
            "materials/imgs/D36.png",
            "materials/imgs/D37.png",
            "materials/imgs/D38.png",
            "materials/imgs/D39.png",
            "materials/imgs/D40.png",
            "materials/imgs/D41.png",
            "materials/imgs/D42.png",
            "materials/imgs/D43.png",
            "materials/imgs/D44.png",
            "materials/imgs/D45.png",
            "materials/imgs/D46.png",
            "materials/imgs/D47.png",
            "materials/imgs/D48.png",
            "materials/imgs/D49.png",
            "materials/imgs/D50.png",
            "materials/imgs/D51.png",
            "materials/imgs/D52.png",
            "materials/imgs/D53.png",
            "materials/imgs/D54.png",
            "materials/imgs/D55.png",
            "materials/imgs/D56.png",
            "materials/imgs/D57.png",
            "materials/imgs/D58.png",
            "materials/imgs/D59.png",
            "materials/imgs/D60.png",
            "materials/imgs/D61.png",
            "materials/imgs/D62.png",
            "materials/imgs/D63.png",
            "materials/imgs/D64.png",
            "materials/imgs/D65.png",
            "materials/imgs/D66.png",
            "materials/imgs/D67.png",
            "materials/imgs/D68.png",
            "materials/imgs/D69.png",
            "materials/imgs/D70.png",
            "materials/imgs/D71.png",
            "materials/imgs/D72.png",
            "materials/imgs/D73.png",
            "materials/imgs/D74.png",
            "materials/imgs/D75.png",
            "materials/imgs/D76.png",
            "materials/imgs/D77.png",
            "materials/imgs/D78.png",
            "materials/imgs/D79.png",
            "materials/imgs/D80.png",
            "materials/imgs/D81.png",
            "materials/imgs/D82.png",
            "materials/imgs/D83.png",
            "materials/imgs/D84.png",
            "materials/imgs/D85.png",
            "materials/imgs/D86.png",
            "materials/imgs/D87.png",
            "materials/imgs/D88.png",
            "materials/imgs/D89.png",
            "materials/imgs/D90.png",
            "materials/imgs/D91.png",
            "materials/imgs/D92.png",
            "materials/imgs/D93.png",
            "materials/imgs/D94.png",
            "materials/imgs/D95.png",
            "materials/imgs/D96.png",
            "materials/imgs/D97.png",
            "materials/imgs/D98.png",
            "materials/imgs/D99.png",
            "materials/imgs/D100.png",
            "materials/imgs/D101.png",
            "materials/imgs/D102.png",
            "materials/imgs/D103.png",
            "materials/imgs/D104.png",
            "materials/imgs/D105.png",
            "materials/imgs/D106.png",
            "materials/imgs/D107.png",
            "materials/imgs/D108.png",
            "materials/imgs/D109.png",
            "materials/imgs/D110.png",
            "materials/imgs/D111.png",
            "materials/imgs/D112.png",
        ],
        show_progress_bar: true,
        message: "Loading experiment files...",
        error_message:
            "Oops! There's a problem loading files. Please refresh the page to try again.",
    };
    timeline.push(preload);

    var stimuli_texture = [
        { texture: "materials/imgs/D1.png" },
        { texture: "materials/imgs/D2.png" },
        { texture: "materials/imgs/D3.png" },
        { texture: "materials/imgs/D4.png" },
        { texture: "materials/imgs/D5.png" },
        { texture: "materials/imgs/D6.png" },
        { texture: "materials/imgs/D7.png" },
        { texture: "materials/imgs/D8.png" },
        { texture: "materials/imgs/D9.png" },
        { texture: "materials/imgs/D10.png" },
        { texture: "materials/imgs/D11.png" },
        { texture: "materials/imgs/D12.png" },
        { texture: "materials/imgs/D13.png" },
        { texture: "materials/imgs/D14.png" },
        { texture: "materials/imgs/D15.png" },
        { texture: "materials/imgs/D16.png" },
        { texture: "materials/imgs/D17.png" },
        { texture: "materials/imgs/D18.png" },
        { texture: "materials/imgs/D19.png" },
        { texture: "materials/imgs/D20.png" },
        { texture: "materials/imgs/D21.png" },
        { texture: "materials/imgs/D22.png" },
        { texture: "materials/imgs/D23.png" },
        { texture: "materials/imgs/D24.png" },
        { texture: "materials/imgs/D25.png" },
        { texture: "materials/imgs/D26.png" },
        { texture: "materials/imgs/D27.png" },
        { texture: "materials/imgs/D28.png" },
        { texture: "materials/imgs/D29.png" },
        { texture: "materials/imgs/D30.png" },
        { texture: "materials/imgs/D31.png" },
        { texture: "materials/imgs/D32.png" },
        { texture: "materials/imgs/D33.png" },
        { texture: "materials/imgs/D34.png" },
        { texture: "materials/imgs/D35.png" },
        { texture: "materials/imgs/D36.png" },
        { texture: "materials/imgs/D37.png" },
        { texture: "materials/imgs/D38.png" },
        { texture: "materials/imgs/D39.png" },
        { texture: "materials/imgs/D40.png" },
        { texture: "materials/imgs/D41.png" },
        { texture: "materials/imgs/D42.png" },
        { texture: "materials/imgs/D43.png" },
        { texture: "materials/imgs/D44.png" },
        { texture: "materials/imgs/D45.png" },
        { texture: "materials/imgs/D46.png" },
        { texture: "materials/imgs/D47.png" },
        { texture: "materials/imgs/D48.png" },
        { texture: "materials/imgs/D49.png" },
        { texture: "materials/imgs/D50.png" },
        { texture: "materials/imgs/D51.png" },
        { texture: "materials/imgs/D52.png" },
        { texture: "materials/imgs/D53.png" },
        { texture: "materials/imgs/D54.png" },
        { texture: "materials/imgs/D55.png" },
        { texture: "materials/imgs/D56.png" },
        { texture: "materials/imgs/D57.png" },
        { texture: "materials/imgs/D58.png" },
        { texture: "materials/imgs/D59.png" },
        { texture: "materials/imgs/D60.png" },
        { texture: "materials/imgs/D61.png" },
        { texture: "materials/imgs/D62.png" },
        { texture: "materials/imgs/D63.png" },
        { texture: "materials/imgs/D64.png" },
        { texture: "materials/imgs/D65.png" },
        { texture: "materials/imgs/D66.png" },
        { texture: "materials/imgs/D67.png" },
        { texture: "materials/imgs/D68.png" },
        { texture: "materials/imgs/D69.png" },
        { texture: "materials/imgs/D70.png" },
        { texture: "materials/imgs/D71.png" },
        { texture: "materials/imgs/D72.png" },
        { texture: "materials/imgs/D73.png" },
        { texture: "materials/imgs/D74.png" },
        { texture: "materials/imgs/D75.png" },
        { texture: "materials/imgs/D76.png" },
        { texture: "materials/imgs/D77.png" },
        { texture: "materials/imgs/D78.png" },
        { texture: "materials/imgs/D79.png" },
        { texture: "materials/imgs/D80.png" },
        { texture: "materials/imgs/D81.png" },
        { texture: "materials/imgs/D82.png" },
        { texture: "materials/imgs/D83.png" },
        { texture: "materials/imgs/D84.png" },
        { texture: "materials/imgs/D85.png" },
        { texture: "materials/imgs/D86.png" },
        { texture: "materials/imgs/D87.png" },
        { texture: "materials/imgs/D88.png" },
        { texture: "materials/imgs/D89.png" },
        { texture: "materials/imgs/D90.png" },
        { texture: "materials/imgs/D91.png" },
        { texture: "materials/imgs/D92.png" },
        { texture: "materials/imgs/D93.png" },
        { texture: "materials/imgs/D94.png" },
        { texture: "materials/imgs/D95.png" },
        { texture: "materials/imgs/D96.png" },
        { texture: "materials/imgs/D97.png" },
        { texture: "materials/imgs/D98.png" },
        { texture: "materials/imgs/D99.png" },
        { texture: "materials/imgs/D100.png" },
        { texture: "materials/imgs/D101.png" },
        { texture: "materials/imgs/D102.png" },
        { texture: "materials/imgs/D103.png" },
        { texture: "materials/imgs/D104.png" },
        { texture: "materials/imgs/D105.png" },
        { texture: "materials/imgs/D106.png" },
        { texture: "materials/imgs/D107.png" },
        { texture: "materials/imgs/D108.png" },
        { texture: "materials/imgs/D109.png" },
        { texture: "materials/imgs/D110.png" },
        { texture: "materials/imgs/D111.png" },
        { texture: "materials/imgs/D112.png" },
    ];

    var texture_arr = [
        "materials/imgs/D1.png",
        "materials/imgs/D2.png",
        "materials/imgs/D3.png",
        "materials/imgs/D4.png",
        "materials/imgs/D5.png",
        "materials/imgs/D6.png",
        "materials/imgs/D7.png",
        "materials/imgs/D8.png",
        "materials/imgs/D9.png",
        "materials/imgs/D10.png",
        "materials/imgs/D11.png",
        "materials/imgs/D12.png",
        "materials/imgs/D13.png",
        "materials/imgs/D14.png",
        "materials/imgs/D15.png",
        "materials/imgs/D16.png",
        "materials/imgs/D17.png",
        "materials/imgs/D18.png",
        "materials/imgs/D19.png",
        "materials/imgs/D20.png",
        "materials/imgs/D21.png",
        "materials/imgs/D22.png",
        "materials/imgs/D23.png",
        "materials/imgs/D24.png",
        "materials/imgs/D25.png",
        "materials/imgs/D26.png",
        "materials/imgs/D27.png",
        "materials/imgs/D28.png",
        "materials/imgs/D29.png",
        "materials/imgs/D30.png",
        "materials/imgs/D31.png",
        "materials/imgs/D32.png",
        "materials/imgs/D33.png",
        "materials/imgs/D34.png",
        "materials/imgs/D35.png",
        "materials/imgs/D36.png",
        "materials/imgs/D37.png",
        "materials/imgs/D38.png",
        "materials/imgs/D39.png",
        "materials/imgs/D40.png",
        "materials/imgs/D41.png",
        "materials/imgs/D42.png",
        "materials/imgs/D43.png",
        "materials/imgs/D44.png",
        "materials/imgs/D45.png",
        "materials/imgs/D46.png",
        "materials/imgs/D47.png",
        "materials/imgs/D48.png",
        "materials/imgs/D49.png",
        "materials/imgs/D50.png",
        "materials/imgs/D51.png",
        "materials/imgs/D52.png",
        "materials/imgs/D53.png",
        "materials/imgs/D54.png",
        "materials/imgs/D55.png",
        "materials/imgs/D56.png",
        "materials/imgs/D57.png",
        "materials/imgs/D58.png",
        "materials/imgs/D59.png",
        "materials/imgs/D60.png",
        "materials/imgs/D61.png",
        "materials/imgs/D62.png",
        "materials/imgs/D63.png",
        "materials/imgs/D64.png",
        "materials/imgs/D65.png",
        "materials/imgs/D66.png",
        "materials/imgs/D67.png",
        "materials/imgs/D68.png",
        "materials/imgs/D69.png",
        "materials/imgs/D70.png",
        "materials/imgs/D71.png",
        "materials/imgs/D72.png",
        "materials/imgs/D73.png",
        "materials/imgs/D74.png",
        "materials/imgs/D75.png",
        "materials/imgs/D76.png",
        "materials/imgs/D77.png",
        "materials/imgs/D78.png",
        "materials/imgs/D79.png",
        "materials/imgs/D80.png",
        "materials/imgs/D81.png",
        "materials/imgs/D82.png",
        "materials/imgs/D83.png",
        "materials/imgs/D84.png",
        "materials/imgs/D85.png",
        "materials/imgs/D86.png",
        "materials/imgs/D87.png",
        "materials/imgs/D88.png",
        "materials/imgs/D89.png",
        "materials/imgs/D90.png",
        "materials/imgs/D91.png",
        "materials/imgs/D92.png",
        "materials/imgs/D93.png",
        "materials/imgs/D94.png",
        "materials/imgs/D95.png",
        "materials/imgs/D96.png",
        "materials/imgs/D97.png",
        "materials/imgs/D98.png",
        "materials/imgs/D99.png",
        "materials/imgs/D100.png",
        "materials/imgs/D101.png",
        "materials/imgs/D102.png",
        "materials/imgs/D103.png",
        "materials/imgs/D104.png",
        "materials/imgs/D105.png",
        "materials/imgs/D106.png",
        "materials/imgs/D107.png",
        "materials/imgs/D108.png",
        "materials/imgs/D109.png",
        "materials/imgs/D110.png",
        "materials/imgs/D111.png",
        "materials/imgs/D112.png",
    ];

    //plan:
    //1) make a pool of random triplets
    //2) sample

    var validation_textures = [
        {
            head: 'materials/imgs/D1.png',
            choice_1: 'materials/imgs/D71.png',
            choice_2: 'materials/imgs/D11.png'
        },
        {
            head: 'materials/imgs/D3.png',
            choice_1: 'materials/imgs/D39.png',
            choice_2: 'materials/imgs/D58.png'
        },
        {
            head: 'materials/imgs/D5.png',
            choice_1: 'materials/imgs/D10.png',
            choice_2: 'materials/imgs/D50.png'
        },
        {
            head: 'materials/imgs/D9.png',
            choice_1: 'materials/imgs/D93.png',
            choice_2: 'materials/imgs/D71.png'
        },
        {
            head: 'materials/imgs/D10.png',
            choice_1: 'materials/imgs/D89.png',
            choice_2: 'materials/imgs/D34.png'
        },
        {
            head: 'materials/imgs/D11.png',
            choice_1: 'materials/imgs/D64.png',
            choice_2: 'materials/imgs/D37.png'
        },
        {
            head: 'materials/imgs/D15.png',
            choice_1: 'materials/imgs/D11.png',
            choice_2: 'materials/imgs/D29.png'
        },
        {
            head: 'materials/imgs/D18.png',
            choice_1: 'materials/imgs/D63.png',
            choice_2: 'materials/imgs/D32.png'
        },
        {
            head: 'materials/imgs/D23.png',
            choice_1: 'materials/imgs/D90.png',
            choice_2: 'materials/imgs/D43.png'
        },
        {
            head: 'materials/imgs/D25.png',
            choice_1: 'materials/imgs/D40.png',
            choice_2: 'materials/imgs/D30.png'
        },
        {
            head: 'materials/imgs/D26.png',
            choice_1: 'materials/imgs/D31.png',
            choice_2: 'materials/imgs/D62.png'
        },
        {
            head: 'materials/imgs/D29.png',
            choice_1: 'materials/imgs/D69.png',
            choice_2: 'materials/imgs/D23.png'
        },
        {
            head: 'materials/imgs/D30.png',
            choice_1: 'materials/imgs/D73.png',
            choice_2: 'materials/imgs/D25.png'
        },
        {
            head: 'materials/imgs/D31.png',
            choice_1: 'materials/imgs/D75.png',
            choice_2: 'materials/imgs/D32.png'
        },
        {
            head: 'materials/imgs/D32.png',
            choice_1: 'materials/imgs/D82.png',
            choice_2: 'materials/imgs/D93.png'
        },
        {
            head: 'materials/imgs/D34.png',
            choice_1: 'materials/imgs/D5.png',
            choice_2: 'materials/imgs/D11.png'
        },
        {
            head: 'materials/imgs/D37.png',
            choice_1: 'materials/imgs/D90.png',
            choice_2: 'materials/imgs/D93.png'
        },
        {
            head: 'materials/imgs/D39.png',
            choice_1: 'materials/imgs/D107.png',
            choice_2: 'materials/imgs/D3.png'
        },
        {
            head: 'materials/imgs/D40.png',
            choice_1: 'materials/imgs/D50.png',
            choice_2: 'materials/imgs/D87.png'
        },
        {
            head: 'materials/imgs/D41.png',
            choice_1: 'materials/imgs/D72.png',
            choice_2: 'materials/imgs/D34.png'
        },
        {
            head: 'materials/imgs/D42.png',
            choice_1: 'materials/imgs/D11.png',
            choice_2: 'materials/imgs/D91.png'
        },
        {
            head: 'materials/imgs/D43.png',
            choice_1: 'materials/imgs/D62.png',
            choice_2: 'materials/imgs/D30.png'
        },
        {
            head: 'materials/imgs/D50.png',
            choice_1: 'materials/imgs/D39.png',
            choice_2: 'materials/imgs/D101.png'
        },
        {
            head: 'materials/imgs/D52.png',
            choice_1: 'materials/imgs/D73.png',
            choice_2: 'materials/imgs/D86.png'
        },
        {
            head: 'materials/imgs/D55.png',
            choice_1: 'materials/imgs/D98.png',
            choice_2: 'materials/imgs/D86.png'
        },
        {
            head: 'materials/imgs/D57.png',
            choice_1: 'materials/imgs/D15.png',
            choice_2: 'materials/imgs/D112.png'
        },
        {
            head: 'materials/imgs/D58.png',
            choice_1: 'materials/imgs/D34.png',
            choice_2: 'materials/imgs/D80.png'
        },
        {
            head: 'materials/imgs/D61.png',
            choice_1: 'materials/imgs/D86.png',
            choice_2: 'materials/imgs/D57.png'
        },
        {
            head: 'materials/imgs/D62.png',
            choice_1: 'materials/imgs/D1.png',
            choice_2: 'materials/imgs/D82.png'
        },
        {
            head: 'materials/imgs/D63.png',
            choice_1: 'materials/imgs/D18.png',
            choice_2: 'materials/imgs/D78.png'
        },
        {
            head: 'materials/imgs/D64.png',
            choice_1: 'materials/imgs/D102.png',
            choice_2: 'materials/imgs/D39.png'
        },
        {
            head: 'materials/imgs/D69.png',
            choice_1: 'materials/imgs/D82.png',
            choice_2: 'materials/imgs/D108.png'
        },
        {
            head: 'materials/imgs/D71.png',
            choice_1: 'materials/imgs/D57.png',
            choice_2: 'materials/imgs/D88.png'
        },
        {
            head: 'materials/imgs/D72.png',
            choice_1: 'materials/imgs/D108.png',
            choice_2: 'materials/imgs/D32.png'
        },
        {
            head: 'materials/imgs/D73.png',
            choice_1: 'materials/imgs/D86.png',
            choice_2: 'materials/imgs/D40.png'
        },
        {
            head: 'materials/imgs/D74.png',
            choice_1: 'materials/imgs/D75.png',
            choice_2: 'materials/imgs/D112.png'
        },
        {
            head: 'materials/imgs/D75.png',
            choice_1: 'materials/imgs/D69.png',
            choice_2: 'materials/imgs/D43.png'
        },
        {
            head: 'materials/imgs/D78.png',
            choice_1: 'materials/imgs/D102.png',
            choice_2: 'materials/imgs/D29.png'
        },
        {
            head: 'materials/imgs/D80.png',
            choice_1: 'materials/imgs/D87.png',
            choice_2: 'materials/imgs/D11.png'
        },
        {
            head: 'materials/imgs/D82.png',
            choice_1: 'materials/imgs/D43.png',
            choice_2: 'materials/imgs/D23.png'
        },
        {
            head: 'materials/imgs/D83.png',
            choice_1: 'materials/imgs/D1.png',
            choice_2: 'materials/imgs/D72.png'
        },
        {
            head: 'materials/imgs/D86.png',
            choice_1: 'materials/imgs/D102.png',
            choice_2: 'materials/imgs/D89.png'
        },
        {
            head: 'materials/imgs/D87.png',
            choice_1: 'materials/imgs/D69.png',
            choice_2: 'materials/imgs/D57.png'
        },
        {
            head: 'materials/imgs/D88.png',
            choice_1: 'materials/imgs/D62.png',
            choice_2: 'materials/imgs/D37.png'
        },
        {
            head: 'materials/imgs/D89.png',
            choice_1: 'materials/imgs/D34.png',
            choice_2: 'materials/imgs/D74.png'
        },
        {
            head: 'materials/imgs/D90.png',
            choice_1: 'materials/imgs/D31.png',
            choice_2: 'materials/imgs/D110.png'
        },
        {
            head: 'materials/imgs/D91.png',
            choice_1: 'materials/imgs/D86.png',
            choice_2: 'materials/imgs/D55.png'
        },
        {
            head: 'materials/imgs/D93.png',
            choice_1: 'materials/imgs/D89.png',
            choice_2: 'materials/imgs/D55.png'
        },
        {
            head: 'materials/imgs/D94.png',
            choice_1: 'materials/imgs/D10.png',
            choice_2: 'materials/imgs/D11.png'
        },
        {
            head: 'materials/imgs/D98.png',
            choice_1: 'materials/imgs/D15.png',
            choice_2: 'materials/imgs/D41.png'
        },
        {
            head: 'materials/imgs/D101.png',
            choice_1: 'materials/imgs/D72.png',
            choice_2: 'materials/imgs/D42.png'
        },
        {
            head: 'materials/imgs/D102.png',
            choice_1: 'materials/imgs/D34.png',
            choice_2: 'materials/imgs/D63.png'
        },
        {
            head: 'materials/imgs/D107.png',
            choice_1: 'materials/imgs/D29.png',
            choice_2: 'materials/imgs/D83.png'
        },
        {
            head: 'materials/imgs/D108.png',
            choice_1: 'materials/imgs/D82.png',
            choice_2: 'materials/imgs/D41.png'
        },
        {
            head: 'materials/imgs/D110.png',
            choice_1: 'materials/imgs/D23.png',
            choice_2: 'materials/imgs/D40.png'
        },
        {
            head: 'materials/imgs/D112.png',
            choice_1: 'materials/imgs/D41.png',
            choice_2: 'materials/imgs/D23.png'
        }]

    var check_textures = [
        {
            head: 'materials/imgs/D9.png',
            choice_1: 'materials/imgs/D18.png',
            choice_2: 'materials/imgs/D9.png',
            correct_choice: 1
        },
        {
            head: 'materials/imgs/D18.png',
            choice_1: 'materials/imgs/D9.png',
            choice_2: 'materials/imgs/D18.png',
            correct_choice: 1
        },
        {
            head: 'materials/imgs/D26.png',
            choice_1: 'materials/imgs/D26.png',
            choice_2: 'materials/imgs/D40.png',
            correct_choice: 0
        },
        {
            head: 'materials/imgs/D40.png',
            choice_1: 'materials/imgs/D40.png',
            choice_2: 'materials/imgs/D26.png',
            correct_choice: 0
        },
        {
            head: 'materials/imgs/D43.png',
            choice_1: 'materials/imgs/D62.png',
            choice_2: 'materials/imgs/D43.png',
            correct_choice: 1
        },
        {
            head: 'materials/imgs/D62.png',
            choice_1: 'materials/imgs/D62.png',
            choice_2: 'materials/imgs/D43.png',
            correct_choice: 0
        },
        {
            head: 'materials/imgs/D72.png',
            choice_1: 'materials/imgs/D72.png',
            choice_2: 'materials/imgs/D75.png',
            correct_choice: 0
        },
        {
            head: 'materials/imgs/D75.png',
            choice_1: 'materials/imgs/D72.png',
            choice_2: 'materials/imgs/D75.png',
            correct_choice: 1
        },
        {
            head: 'materials/imgs/D101.png',
            choice_1: 'materials/imgs/D107.png',
            choice_2: 'materials/imgs/D101.png',
            correct_choice: 1
        },
        {
            head: 'materials/imgs/D107.png',
            choice_1: 'materials/imgs/D107.png',
            choice_2: 'materials/imgs/D101.png',
            correct_choice: 0
        }]


    //to shuffle the array of choices at the beginning of the experiment
    function shuffle(array) {
        let currentIndex = array.length,
            randomIndex;
        // While there remain elements to shuffle.
        while (currentIndex != 0) {
            // Pick a remaining element.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            // And swap it with the current element.
            [array[currentIndex], array[randomIndex]] = [
                array[randomIndex],
                array[currentIndex],
            ];
        }
        console.log("Shuffled array:", array);
        return array;
    }

    var test_stimuli = [];

    // to get a random item from the array
    function getRandomItems(arr) {
        var temp_array = jsPsych.randomization.sampleWithoutReplacement(arr, 2);
        arr = arr.filter((e) => e !== temp_array[0]);
        arr = arr.filter((e) => e !== temp_array[1]);
        return temp_array;
    }


    // Pop-up box if people try to leave the page (including refreshing) 
    window.onbeforeunload = function () {
        return "If you leave or refresh the page, you will not be able to finish the experiment.";
    };


    //Enter fullscreen mode- asks participants to press "continue" button to enter full screen
    // Once participants enter fullscreen mode, their ID is recorded
    timeline.push({
        type: jsPsychFullscreen,
        fullscreen_mode: true, //change to true to turn on & false to turn off
    })

    // Get Start time
    var start_time = new Date();

    // Record subjectID, and date info
    jsPsych.data.addProperties({ subjectID: subject_id, dateInfo: start_time });


    // "Fake trial" for checking if experiment loaded correctly
    var loadCheck = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: "",
        choices: "NO_KEYS",
        trial_duration: 10
    }
    timeline.push(loadCheck);


    // // Save the fake trial data to the server (this is done as a way to check that if there is not a full dataset for a registered ID, that the experiment loaded properly and the participant dropped out)
    // timeline.push({
    //   type: jsPsychCallFunction,
    //   func: function () { saveData(jsPsych.data.get()) }
    // });


    // Inter trial interval //
    var fixation = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: '<div style= "font-size:45px;">+</div>',
        choices: "NO_KEYS",
        trial_duration: 500
    }

    // Overview instructions of experiment /// UPDATE + TotalTasks +, + numTasks +, + expTime +, + totalTasks +
    var totalTasks = numTasks + 1;

    var overview_instructions = {
        type: jsPsychHtmlButtonResponse,
        stimulus: 'Welcome! <p> This experiment involves 1 experimental task.' +
            '<p> It will take about ' + expTime + ' minutes to complete all trials.',
        choices: ['Continue']
    }
    timeline.push(overview_instructions);


    var lasttrialdata_rt = 0;

    /* define testing instructions */
    var instructions = {
        type: jsPsychHtmlButtonResponse,
        stimulus:
            `<div style='text-align: center;'>
      <p>In each trial of this task, you will see three images: one target item on top, and two choices beneath the target item.</p>
      <p><strong>Please select the item that is most like the target item.</strong></p>
      <p>To select the option on the <strong>LEFT</strong>, press the <strong>LEFT ARROW</strong> key. 
      To select the option on the <strong>RIGHT</strong>, press the <strong>RIGHT ARROW</strong> key.</p>
                  <!-- Target Image at the Top -->
      <div style='margin: 20px;'>
        <img src='materials/imgs/instruction_images/InstructionImg1D78.png' alt='Target Image' style='width:200px; height:auto;' />
        <p><em>Target Image</em></p>
      </div>

      <!-- Two Choice Images Below -->
      <div style='display: flex; justify-content: center;'>
        <div style='margin-right: 50px;'>
          <img src='materials/imgs/instruction_images/InstructionImg2D34.png' alt='Choice Image 1' style='width:150px; height:auto;' />
          <p><em><strong>LEFT ARROW</strong></em></p>
        </div>
        <div style='margin-left: 50px;'>
          <img src='materials/imgs/instruction_images/InstructionImg3D80.png' alt='Choice Image 2' style='width:150px; height:auto;' />
          <p><em><strong>RIGHT ARROW</strong></em></p>
        </div>
      </div>
    </div>

      <p>If you have any questions, please ask them now.</p>
      <p>Otherwise, please click 'Continue' to begin practice.</p>`,
        choices: ["Continue"],
        post_trial_gap: 2000
    };

    timeline.push(instructions);

    var fixation = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: "+",
        choices: "NO_KEYS",
        trial_duration: 500,
    };
    timeline.push(fixation);

    //var arr_pair = [];

    // define the practice trials
    var practice_trial_texture = {
        type: jsPsychImageKeyboardResponse,
        stimulus: jsPsych.timelineVariable("texture"),
        choices: ['ArrowLeft', 'ArrowRight'],
        on_start: function (trial) {
            shuffle(texture_arr);
            arr_pair = getRandomItems(texture_arr);
            // the following makes sure the choices and stimulus are NOT the same!
            while (
                arr_pair[0] == jsPsych.timelineVariable("texture") ||
                arr_pair[1] == jsPsych.timelineVariable("texture")
            ) {
                arr_pair = getRandomItems(texture_arr);
            }
            console.log("Choices:", arr_pair);

            trial.prompt = `
        <div style="display: flex; justify-content: space-around; margin-top: 20px;">
          <img src="${arr_pair[0]}" style="width: 300px; height: 300px; margin-right: 50px;" />
          <img src="${arr_pair[1]}" style="width: 300px; height: 300px; margin-left: 50px;" />
        </div>
      </div>`;



            //   // Store arr_pair in the trial data
            //   jsPsych.data.addProperties({ arr_pair: arr_pair });
            // Save selected images to trial data
            trial.data = {
                choices: arr_pair
            };
        },
        on_finish: function (data) {
            console.log("Response (key press):", data.response);


            // Retrieve arr_pair from trial data
            const choices = jsPsych.data.get().last(1).select('choices').values[0];
            console.log("Retrieved choices:", choices);

            // // Ensure arr_pair is available
            // if (typeof arr_pair === 'undefined') {
            //   console.error("arr_pair is undefined. Data may not be set correctly.");
            //   return;
            // }

            //shuffle(texture_arr);
            //data.choices = arr_pair;
            // Determine which image was selected based on key press
            if (data.response == 'ArrowLeft') {
                console.log("ArrowLeft selected.");
                console.log("Selected arr_pair value for ArrowLeft:", arr_pair[0]);
                data.selected_image = arr_pair[0];
                data.selected_index = 0;  // ArrowLeft corresponds to the first choice
                console.log("Data selected_image:", data.selected_image);
                console.log("Data selected_index:", data.selected_index);
            } else if (data.response == 'ArrowRight') {
                console.log("ArrowRight selected.");
                console.log("Selected arr_pair value for ArrowRight:", arr_pair[1]);
                data.selected_image = arr_pair[1];
                data.selected_index = 1;  // ArrowLeft corresponds to the first choice
                console.log("Data selected_image:", data.selected_image);
                console.log("Data selected_index:", data.selected_index);
            }

            // Get the previous trial's data and compute the average response time
            var data_last1 = jsPsych.data.get().last(1);
            var lasttrialdata_rt = data_last1.select("rt").mean();

            // Check if the response was "speedy"
            data.speedy = lasttrialdata_rt < 500 ? true : false;

            // Record the sampling algorithm used
            data.sampleAlg = "random";
        },
    };

    var if_trial_speed = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus:
            "<p><strong>You're going too fast.</strong><p>Please slow down and assess each triplet." +
            "<p>Press 'y' to continue.</p></p>",
        choices: ["y"],
    };

    var if_node_speed = {
        timeline: [if_trial_speed],
        conditional_function: function () {
            // get the data from the previous trial,
            // and check which key was pressed
            var last_trial_speed = jsPsych.data.get().last(1).values()[0].speedy;
            if (last_trial_speed) {
                return true; // the parameter value has to be returned from the function;
            } else {
                return false;
            }
        },
    };

    console.log("Stimuli texture for practice trials:", stimuli_texture);

    var practice_trial_procedure_textures = {
        timeline: [fixation, practice_trial_texture, if_node_speed],
        timeline_variables: stimuli_texture,
        randomize_order: true,
        sample: {
            type: "with-replacement",
            size: 10,
            on_start: function () {
                console.log("Practice trial procedure starting.");
            },
            on_finish: function () {
                console.log("Practice trial procedure finished.");
            }
        },
    };
    console.log("Sample settings:", practice_trial_procedure_textures.sample);

    var practice_procedure = {
        timeline: [practice_trial_procedure_textures],
        repetitions: 1
    };

    console.log("Timeline before practice procedure:", timeline);
    console.log("Stimuli texture:", stimuli_texture);
    console.log("Sample settings after definition:", practice_trial_procedure_textures.sample);
    // Verify practice_procedure definition
    console.log("Practice procedure definition:", practice_procedure);

    timeline.push(practice_procedure);

    var begin_experiment = {
        type: jsPsychHtmlButtonResponse,
        stimulus:
            `<p>Great job!</p>
      <p>You are now ready to begin the experiment.</p>
      <p>There will be around 200 trials. You will have opportunities to take breaks at three stages of the trials.</p>
      <p>When you are ready to begin please click 'Continue'.</p>`,
        choices: ["Continue"],
        post_trial_gap: 2000
    }

    timeline.push(begin_experiment);
    timeline.push(fixation);

    // define the trials!
    var trial_texture = {
        type: jsPsychImageKeyboardResponse,
        stimulus: jsPsych.timelineVariable("texture"),
        choices: ['ArrowLeft', 'ArrowRight'],
        on_start: function (trial) {
            shuffle(texture_arr);
            arr_pair = getRandomItems(texture_arr);
            // the following makes sure the choices and stimulus are NOT the same!
            while (
                arr_pair[0] == jsPsych.timelineVariable("texture") ||
                arr_pair[1] == jsPsych.timelineVariable("texture")
            ) {
                arr_pair = getRandomItems(texture_arr);
            }
            console.log("Choices:", arr_pair);
            trial.prompt = `
        <div style="display: flex; justify-content: space-around; margin-top: 20px;">
          <img src="${arr_pair[0]}" style="width: 300px; height: 300px; margin-right: 50px;" />
          <img src="${arr_pair[1]}" style="width: 300px; height: 300px; margin-left: 50px;" />
        </div>
      </div>`;

            // Store arr_pair in trial data
            trial.data = {
                choices: [arr_pair[0], arr_pair[1]]
            };
        },
        on_finish: function (data) {
            console.log("Response (key press):", data.response);

            // Retrieve arr_pair from trial data
            const choices = jsPsych.data.get().last(1).select('choices').values[0];
            console.log("Retrieved Choices:", choices);

            // // Ensure arr_pair is available
            // if (typeof arr_pair === 'undefined') {
            //   console.error("arr_pair is undefined. Data may not be set correctly.");
            //   return;
            // }
            //shuffle(texture_arr);
            //data.choices = arr_pair;
            // Determine which image was selected based on key press
            if (data.response == 'ArrowLeft') {
                console.log("ArrowLeft selected.");
                data.selected_image = arr_pair[0];
                data.selected_index = 0;  // ArrowLeft corresponds to the first choice
            } else if (data.response == 'ArrowRight') {
                console.log("ArrowRight selected.");
                data.selected_image = arr_pair[1];
                data.selected_index = 1;  // ArrowLeft corresponds to the first choice
            }

            // Get the previous trial's data and compute the average response time
            var data_last1 = jsPsych.data.get().last(1);
            var lasttrialdata_rt = data_last1.select("rt").mean();

            // Check if the response was "speedy"
            data.speedy = lasttrialdata_rt < 500 ? true : false;

            // Record the sampling algorithm used
            // Save additional data
            data.choices = arr_pair;
            data.sampleAlg = "random";
        },
    };

    // define the validation trials!
    var validation_trial = {
        type: jsPsychImageKeyboardResponse,
        stimulus: function () {
            row = validation_shuffled_doubled.pop();
            head = row.head;
            return head;
        },
        choices: ['ArrowLeft', 'ArrowRight'],  // Use arrow keys for choices

        on_start: function (trial) {
            arr_pair = [row.choice_1, row.choice_2];  // Get the two choices

            // Set the prompt to display the two choice images with space between them
            trial.prompt = `
      <div style="display: flex; justify-content: space-around; margin-top: 20px;">
        <img src="${arr_pair[0]}" style="width: 300px; height: 300px; margin-right: 50px;" />
        <img src="${arr_pair[1]}" style="width: 300px; height: 300px; margin-left: 50px;" />
      </div>`;
        },

        on_finish: function (data) {
            console.log("Response (key press):", data.response);

            // Ensure arr_pair is available
            if (typeof arr_pair === 'undefined') {
                console.error("arr_pair is undefined. Data may not be set correctly.");
                return;
            }
            // Determine which image was selected based on the key press
            if (data.response == 'ArrowLeft') {
                console.log("ArrowLeft selected.");
                data.selected_image = arr_pair[0];
                data.selected_index = 0;  // ArrowLeft corresponds to the first choice
            } else if (data.response == 'ArrowRight') {
                console.log("ArrowRight selected.");
                data.selected_image = arr_pair[1];
                data.selected_index = 1;  // ArrowLeft corresponds to the first choice
            }

            // Save the choices to the data
            //data.choices = arr_pair;
            //console.log("Choices array:", arr_pair);

            // Record additional information such as response time and whether it was "speedy"
            var data_last = jsPsych.data.get().last(1);
            var lasttrialdata_rt = data_last.select("rt").mean();

            data.speedy = lasttrialdata_rt < 500 ? true : false;
            // Save additional data
            data.choices = arr_pair;
            data.sampleAlg = "validation";
        }
    };

    // Define the attention checks with keyboard responses
    var check_trial = {
        type: jsPsychImageKeyboardResponse,
        stimulus: jsPsych.timelineVariable("head"),  // Display the head image
        choices: ['ArrowLeft', 'ArrowRight'],  // Use arrow keys for choices

        on_start: function (trial) {
            arr_pair = [
                jsPsych.timelineVariable("choice_1"),
                jsPsych.timelineVariable("choice_2")
            ];

            // Set the prompt to display the two choice images with space between them
            trial.prompt = `
      <div style="display: flex; justify-content: space-around; margin-top: 20px;">
        <img src="${arr_pair[0]}" style="width: 300px; height: 300px; margin-right: 50px;" />
        <img src="${arr_pair[1]}" style="width: 300px; height: 300px; margin-left: 50px;" />
      </div>`;
        },

        on_finish: function (data) {

            const response = data.response.toLowerCase();
            console.log("Response (key press):", data.response);
            // Save the choices to the data
            data.choices = arr_pair;

            console.log("Choices array:", arr_pair);

            // Add logging to verify the conditions
            console.log("Checking if response is arrowleft or arrowright...");

            // Determine which image was selected based on the key press
            if (response === 'arrowleft') {
                console.log("ArrowLeft selected.");
                data.selected_image = arr_pair[0];
                data.selected_index = 0;  // ArrowLeft corresponds to the first choice
            } else if (response === 'arrowright') {
                console.log("ArrowRight selected.");
                data.selected_image = arr_pair[1];
                data.selected_index = 1;  // ArrowRight corresponds to the second choice
            }

            // Log the values for debugging
            console.log("Selected Index:", data.selected_index);
            console.log("Correct Choice (from timeline variable):", Number(jsPsych.timelineVariable("correct_choice")));


            // Check if the selected image is the correct choice
            if (data.selected_index == Number(jsPsych.timelineVariable("correct_choice"))) {
                data.correct = true;
                console.log("Correct choice made!");
            } else {
                data.correct = false;
                console.log("Incorrect choice.");
            }

            // Record the sample algorithm type
            data.sampleAlg = "check";
        }
    };

    var if_trial_check = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus:
            "<p><strong>Incorrect!</strong></p>That was an attention check. Please pay attention while completing this task.<p>Press 'y' to continue.</p>",
        choices: ["y"],
    };

    var if_node_check = {
        timeline: [if_trial_check],
        conditional_function: function () {
            // get the data from the previous trial,
            // and check which key was pressed
            var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
            if (last_trial_correct) {
                return false; // the parameter value has to be returned from the function
            } else {
                return true; // the parameter value has to be returned from the function
            }
        },
    };

    // okay so this is to get a random set of elements...
    function getRandom(arr, n) {
        var result = new Array(n),
            len = arr.length,
            taken = new Array(len);
        if (n > len)
            throw new RangeError("getRandom: more elements taken than available");
        while (n--) {
            var x = Math.floor(Math.random() * len);
            result[n] = arr[x in taken ? taken[x] : x];
            taken[x] = --len in taken ? taken[len] : len;
        }
        return result;
    }

    //actually grabbing them
    var selected_validation_textures = getRandom(validation_textures, 50); //
    var validation_shuffled_doubled = jsPsych.randomization.repeat(
        selected_validation_textures,
        2
    );

    var validation_procedure_textures = {
        timeline: [fixation, validation_trial, if_node_speed],
        timeline_variables: validation_shuffled_doubled,
        sample: {
            type: "without-replacement",
            size: 1,
        },
    };

    var trial_procedure_textures = {
        timeline: [fixation, trial_texture, if_node_speed],
        timeline_variables: stimuli_texture,
        randomize_order: true,
        sample: {
            type: "with-replacement",
            size: 1,
        },
    };

    var check_textures_procedure = {
        timeline: [fixation, check_trial, if_node_check],
        timeline_variables: check_textures,
        sample: {
            type: "without-replacement",
            size: 1,
        },
    };


    var quick_break1 = {
        type: jsPsychHtmlButtonResponse,
        stimulus:
            "Nice job! You have completed 25% of the experiment trials. Feel free to take a quick break, then click 'Continue' when you are ready proceed to the next round." +
            "<p>Remember, your task is to <strong>select the item closest to the item on top.</strong>",
        choices: ["Continue"],
    };

    var quick_break2 = {
        type: jsPsychHtmlButtonResponse,
        stimulus:
            "Nice job! You have completed 50% of the experiment trials. Feel free to take a quick break, then click 'Continue' when you are ready proceed to the next round." +
            "<p>Remember, your task is to <strong>select the item closest to the item on top.</strong>",
        choices: ["Continue"],
    };

    var quick_break3 = {
        type: jsPsychHtmlButtonResponse,
        stimulus:
            "Nice job! You have completed 75% of the experiment trials. Feel free to take a quick break, then click 'Continue' when you are ready proceed to the next round." +
            "<p>Remember, your task is to <strong>select the item closest to the item on top.</strong>",
        choices: ["Continue"],
    };

    // var trial_count = 0;  // Initialize a counter for tracking the number of trials
    // var total_trials = 200;  // Set the total number of trials in your experiment
    // var break_points = [0.25, 0.50, 0.75];  // Define break points as fractions of the total trials
    // var break_indices = break_points.map(bp => Math.round(bp * total_trials));  // Convert break points to indices
    // var next_break_index = 0;  // Track the next break point to show

    // // Define the break message based on percentage
    // var break_trial = {
    //   type: jsPsychHtmlButtonResponse,
    //   stimulus: function () {
    //     var percent_complete = (trial_count / total_trials) * 100;
    //     return "<p>You are " + percent_complete.toFixed(0) + "% of the way through the experiment.</p>" +
    //       "<p>Take a short break, and press 'Continue' when you're ready to proceed.</p>";
    //   },
    //   choices: ['Continue']
    // };

    // // Function to determine when to show a break (at 25%, 50%, and 75%)
    // var check_break_function = function () {
    //   // Check if the current trial count is at or past the next break point
    //   if (trial_count >= break_indices[next_break_index]) {
    //     next_break_index++;  // Move to the next break point
    //     return true;  // Trigger the break trial
    //   } else {
    //     return false;  // Skip the break trial
    //   }
    // };

    // // Update trial_count after each batch of trials
    // var update_trial_count = function (trial_sample_size) {
    //   trial_count += trial_sample_size;
    // };

    var texture_procedure = {
        timeline: [
            trial_procedure_textures,
            check_textures_procedure,
            validation_procedure_textures,
        ],
        randomize_order: true,
        repetitions: 1
    };

    timeline.push(texture_procedure);
    timeline.push(quick_break1);
    timeline.push(texture_procedure);
    timeline.push(quick_break2);
    timeline.push(texture_procedure);
    timeline.push(quick_break3);
    timeline.push(texture_procedure);

    // var trial_and_breaks_procedure = {
    //   timeline: [texture_procedure, break_trial],
    //   loop_function: function () {
    //     return check_break_function();
    //   }
    // }

    // timeline.push(trial_and_breaks_procedure);
    // timeline.push(break_trial);
    //timeline.push(quick_break);
    //timeline.push(texture_procedure);

    // total number of trials per participant = (a(5)(4)) + (b(5)(4)) + (c(5)(4))
    // First value = number of repetitions
    // Second value = number of blocks
    // a = number of validation images selected
    // b = number of trial images selected
    // c = number of check images selected
    // a  = 1/5b
    // for 200 trials -> a = 2, b = 7, c = 1 

    //timeline.push(save_data); //ACTUALLY PUSHING DATA TO SERVER

    var goodbye = {
        type: jsPsychHtmlButtonResponse,
        stimulus:
            `<p>You have finished the experiment.</p>
    <p>Please click the button below to complete the experiment and inform the experimenter. Thank you!</p>`,
        choices: ['Continue']
    };
    timeline.push(goodbye);

    /* ---------------------------------- End of main experiment ---------------------------------------- */

    //Exit fullscreen
    timeline.push({
        type: jsPsychFullscreen,
        fullscreen_mode: false
    })

    jsPsych.run(timeline);

</script>

</html>